<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="3hOTemx!rUcZpUy4s?tU">SHAKER_BACKLASH</variable><variable id=".Drhw|b{yTm#(p-kX(C~">it_clips</variable><variable id="d3e!$Jc|z{T~i|acspwI">twist_clips</variable><variable id="}tU=p%E!@/gZ@P(ci8j(">shake_clips</variable><variable id=")jR`d5%^b;0[$IBl-oAi">bop_clips</variable><variable id="%}#~JeG][HKEZ2j|Ska3">action_to_cliptable_map</variable><variable id="PhJatqp%T%s3m]?@`!~,">sound_schedule</variable><variable id="e%u@zo7vTy_$JaW0hU76">closed_hi_hat_clip</variable><variable id="!6~U=$duynhesF^q+fE{">dry_kick_clip</variable><variable id="XPb*(ghi*lwu/8$g4WfD">note_length_multipliers</variable><variable id="sKpZ^*R$)NT)XF}kA9.Q">speed_schedule</variable><variable id="q-rFn?+PRpqn!vB=coo8">motor_hysteresis</variable><variable id="f8|]atRDU.hJstsL1WLv">shaker_hysteresis</variable><variable id="AAB=$~E|0!#7GA?CQpF1">bit</variable><variable id="{bD:gy+}9){-h.ymsKc]">num</variable><variable id="%-jIW.bQyYpoIx206@+~">ret</variable><variable id="}|G@s56SXz9CGYURjBN]">bopit_action_e</variable><variable id="H$D]NeMqRfCt0V*9w=1B">debounce_interval</variable><variable id="GTp%:E,z]8PoRiDX4JBh">button</variable><variable id="k%HfqAs;v3:.ut|O54;s">prev_sample</variable><variable id="YOX[?O`C,[XT3V?O/9e3">last_edge_time</variable><variable id="APOiDO2)qQVTV0n)5g7[">button_out</variable><variable id="kNs3Z=WYu$u#0uA^v-9!">actions</variable><variable id="(8Y:.T0bfoKac}i_F)=o">beats</variable><variable id="0O)2%*{.h48=j^7Q7*t~">sound_schedule2</variable><variable id="5z/=VK[mZ#rKcNGjW#I@">closed_hi_hat_clip2</variable><variable id="0,$=C.GHAI35@g|*#pyt">dry_kick_clip2</variable><variable id="-I9URcm![f-J?W5Yonm~">t_measure_start</variable><variable id=":anK!X9OMtTSPT5Q$bo3">ms_per_eighth_note</variable><variable id="5TRq:mo/=]5$rflC6){v">t_this_action</variable><variable id="/t`Z^`;2zi5)#|*z20t/">beat_state</variable><variable id="1;GGCu3dw:~,L=eDxSrT">list</variable><variable id="}no`*+.l+Ht2jUchUz{[">lfsr</variable><variable id="MGhC@H[vpt/HTf5v]*G7">t_now</variable><variable id="b=CVt.j]xKYi$|Md84.6">t_next_beat</variable><variable id="_?z|T3K#QxNToTI:ux$-">measure_number</variable><variable id="?wTvu}fQCC66U_Std,9I">index</variable><variable id="|=fbxSq/DQ[@GDK1vDAp">sched_slot</variable></variables><block type="device_gesture_event" id="S$ZnZ|/,oCx#`}5?O|a6" x="1070" y="-210"><field name="NAME">Gesture.ThreeG</field><statement name="HANDLER"><block type="console_log" id="pY/wa^I/`QYY9U75#;*!"><value name="value"><shadow type="text" id="xwlXol+-qt.O.:BJT]fU"><field name="TEXT">This is just using typescript to be as close to the C version as possible</field></shadow></value><next><block type="console_log" id="i4umTfeuY=IG:)w|#!h("><value name="value"><shadow type="text" id="7tX(;vBuatE#a/*[3?^K"><field name="TEXT">Disclaimer: figuring out what static typescript is oops</field></shadow></value><next><block type="console_log" id="-Xbr$=/O#qB86%3]]a;s"><value name="value"><shadow type="text" id="EgEANdMr5/CUS)iS%;g+"><field name="TEXT">debounce.h</field></shadow></value><next><block type="typescript_statement" id="E@|)iRHLRBTWgz(}$.WD" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface debounce_state {" line1="    prev_sample: boolean," line2="    last_edge_time: number," line3="    debounce_interval: number," line4="    button_out: boolean" line5="}" numlines="6"></mutation><next><block type="console_log" id="^r~u5.kxX*wi,Ebu+Dd!"><value name="value"><shadow type="text" id="Lia{?)R1P4*N`t6K9.#g"><field name="TEXT">debounce.c</field></shadow></value><next><block type="typescript_statement" id="nysQ.1IycOHfP9Z|Zw_W" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function debounce_button(db: debounce_state, button: boolean, time_now: number) {" line1="    if ((button == true) &amp;&amp; (db.prev_sample == false)) {" line2="        db.last_edge_time = time_now;" line3="    }" line4="" line5="    if ((button == false) &amp;&amp; (db.prev_sample == true)) {" line6="        db.last_edge_time = time_now;" line7="    }" line8="" line9="    db.prev_sample = button;" line10="" line11="    if ((time_now - db.last_edge_time) &gt; db.debounce_interval) {" line12="        db.button_out = button;" line13="    }" line14="" line15="    return db.button_out;" line16="}" numlines="17"></mutation><next><block type="console_log" id="DeifY]h-H=-N%g`^J!Fq"><value name="value"><shadow type="text" id="KJs^jFMFfA;k9Y7(r-AA"><field name="TEXT">game.h</field></shadow></value><next><block type="typescript_statement" id="rZm8b?J9OUuR8HuGvr=%" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enum bopit_action_e {" line1="    BOPIT_ACTION_TWIST = 0," line2="    BOPIT_ACTION_SHAKE = 1," line3="    BOPIT_ACTION_BOP = 2," line4="    BOPIT_ACTION_NUM_ACTIONS = 3" line5="}" numlines="6"></mutation><next><block type="typescript_statement" id="0DCKAp]n}w1=TNu:4Dsk" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enum beat_enum_e {" line1="    BEAT_ENUM_BEAT_1 = 0,       // &quot;command&quot;" line2="    BEAT_ENUM_BEAT_1_5 = 1,     // &quot;it&quot;" line3="    BEAT_ENUM_BEAT_2 = 2,       // hi-hat quarter note" line4="    BEAT_ENUM_BEAT_3 = 3,       // bass drum eighth note" line5="    BEAT_ENUM_BEAT_3_5 = 4,     // bass drum eighth note" line6="    BEAT_ENUM_BEAT_4 = 5,       // hi-hat quarter note" line7="    BEAT_ENUM_NUM_BEATS" line8="}" numlines="9"></mutation><next><block type="typescript_statement" id="x][u[/[cf;{W{bv)SXQu" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface audio_clip { //TODO - how on earth will audio work" line1="    audio: number," line2="    audio_len: number" line3="}" numlines="4"></mutation><next><block type="typescript_statement" id="bWJ6*wayi=kkwqs!7OxR" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface bopit_user_input { //TODO - dont understand yet" line1="    motor_voc_q8_8: number," line2="    shaker_voc_q8_8: number," line3="    button: number //should this be boolean?" line4="}" numlines="5"></mutation><next><block type="typescript_statement" id="()fiP`[whk]h|t:IM5pg" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface bopit_gamestate {" line1="    t_now: number," line2="    t_next_beat: number," line3="    // false if the game is still active, true if the player has lost." line4="    lost: boolean," line5="    // Holds the next expected action. Generated on beat 2 of each measure after a successful user action." line6="    ms_per_eighth_note: number," line7="    measure_number: number," line8="    expected_action: bopit_action_e," line9="    t_this_action: number," line10="    t_measure_start: number," line11="    action_window: number, // tolerance in time-domain for beat detection" line12="    beat_state: beat_enum_e," line13="    // linear-feedback shift register for random number generation" line14="    lfsr: number," line15="    // Variables for keeping track of previous UI state" line16="    bop_debouncer: debounce_state," line17="    button_prev: boolean," line18="    motor_prev: boolean," line19="    shaker_prev: boolean," line20="    tlastedge_button: number," line21="    tlastedge_motor: number," line22="    tlastedge_shaker: number," line23="    // If this is null, there's no sound ready to play." line24="    pending_audio: audio_clip //TODO" line25="}" numlines="26"></mutation><next><block type="console_log" id="~x@d+IZl@`ozmjY*b$_e"><value name="value"><shadow type="text" id="*HmubjL1h3|6_^XFl/_#"><field name="TEXT">game.c</field></shadow></value><next><block type="variables_set" id="c0e]_UHWCRWon37s5UT*"><field name="VAR" id="3hOTemx!rUcZpUy4s?tU">SHAKER_BACKLASH</field><value name="VALUE"><shadow type="math_number" id="dD9?DF33U5`NzU:Y0s!z"><field name="NUM">600</field></shadow></value><next><block type="variables_set" id="Dz}RDLTscIWA}Pr|}W:J"><field name="VAR" id=".Drhw|b{yTm#(p-kX(C~">it_clips</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="!QHc|bN+4^CiW1de3R^g"><mutation items="4"/><value name="ADD0"><shadow type="math_number" id="2W23!wk#~DJ7hO?u-|)="><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="tiNV_t+k|h-qGA,8dWm)"><field name="NUM">0</field></shadow></value><value name="ADD2"><shadow type="math_number" id="8H)F7Yn6H43C+;tOo.hF"><field name="NUM">0</field></shadow></value><value name="ADD3"><shadow type="math_number" id="9T^;S4nT7WGTm2xFDZW@"><field name="NUM">0</field></shadow></value></block></value><next><block type="variables_set" id="maq#Ot[`t1mlxL}?Az$Q"><field name="VAR" id="d3e!$Jc|z{T~i|acspwI">twist_clips</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="1k`-7e0~i{=R(=mau=?6"><mutation items="4"/><value name="ADD0"><shadow type="math_number" id="F=a#(FlpL}lgfwRmdkZ["><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="K5p,5O9^FSqDnl#.t4oQ"><field name="NUM">0</field></shadow></value><value name="ADD2"><shadow type="math_number" id="]W=5.c_vQ%r_@Q~8H~.u"><field name="NUM">0</field></shadow></value><value name="ADD3"><shadow type="math_number" id="^X^;k*unjJAs`2Pu1DW3"><field name="NUM">0</field></shadow></value></block></value><next><block type="variables_set" id="@wv.!S[S3C0`]vOli6su"><field name="VAR" id="}tU=p%E!@/gZ@P(ci8j(">shake_clips</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="adF9T1hlM|HPshuEwj;C"><mutation items="4"/><value name="ADD0"><shadow type="math_number" id="^*6gGC$sd4uE5arxBnGG"><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="00`OWCb^B0FCwF-$%0+V"><field name="NUM">0</field></shadow></value><value name="ADD2"><shadow type="math_number" id="lbKdd?Yu*TZJLVXPy#EG"><field name="NUM">0</field></shadow></value><value name="ADD3"><shadow type="math_number" id="i;Q!LDt:Ir2#cQJ@=czw"><field name="NUM">0</field></shadow></value></block></value><next><block type="variables_set" id="jj6Xv=nzC}LM}lsM4Vga"><field name="VAR" id=")jR`d5%^b;0[$IBl-oAi">bop_clips</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="yENL:K6hirfIyP=T:4I|"><mutation items="4"/><value name="ADD0"><shadow type="math_number" id="lZ$kLLvI`90=ZQ,.ReQ{"><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="3tPDbsO2%5ERG[O/9)m2"><field name="NUM">0</field></shadow></value><value name="ADD2"><shadow type="math_number" id="5mOY]*A|=aO[~S7%wUWv"><field name="NUM">0</field></shadow></value><value name="ADD3"><shadow type="math_number" id="e!jz;(Z0,9CYVI;{J#o_"><field name="NUM">0</field></shadow></value></block></value><next><block type="typescript_statement" id="[!+{M4Pt~4ud{}SXgppF" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let dry_kick_clip: audio_clip;" numlines="1" declaredvars="dry_kick_clip"></mutation><next><block type="typescript_statement" id="P5gwPGd?/@)zXP_qlsj9" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let closed_hi_hat_clip: audio_clip;" numlines="1" declaredvars="closed_hi_hat_clip"></mutation><next><block type="variables_set" id="R1Li5}yfCtj`YDY0,C0m"><field name="VAR" id="%}#~JeG][HKEZ2j|Ska3">action_to_cliptable_map</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="#Vj-ckTV|-R]}ETbct_~"><mutation items="3"/><value name="ADD0"><block type="variables_get" id="G-[_wAT}aF}t*|}Vg)CW"><field name="VAR" id="d3e!$Jc|z{T~i|acspwI">twist_clips</field></block></value><value name="ADD1"><block type="variables_get" id="/w9[.~$1rYw*4anSax6/"><field name="VAR" id="}tU=p%E!@/gZ@P(ci8j(">shake_clips</field></block></value><value name="ADD2"><block type="variables_get" id="8~lFt+57`VUqg!(,K9jU"><field name="VAR" id=")jR`d5%^b;0[$IBl-oAi">bop_clips</field></block></value></block></value><next><block type="variables_set" id="P],*(eGmK2oebWFFsjD`"><field name="VAR" id="PhJatqp%T%s3m]?@`!~,">sound_schedule</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="C0(aZwkn:y5kLjsC_fVL" inline="false"><mutation items="6"/><value name="ADD0"><block type="typescript_expression" id="HM[4n}T@_av+*ZiHa3_r" editable="false"><field name="EXPRESSION">null</field></block></value><value name="ADD1"><block type="typescript_expression" id="7b`2@/RitCy]D2H/x~*B" editable="false"><field name="EXPRESSION">null</field></block></value><value name="ADD2"><block type="variables_get" id="E%%mE{Vc;kn`I2O.{z?C"><field name="VAR" id="e%u@zo7vTy_$JaW0hU76">closed_hi_hat_clip</field></block></value><value name="ADD3"><block type="variables_get" id="`*8;LQ3d:|5is~W*+;i+"><field name="VAR" id="!6~U=$duynhesF^q+fE{">dry_kick_clip</field></block></value><value name="ADD4"><block type="variables_get" id="a#q?aj=OW)gkH}syOC|j"><field name="VAR" id="!6~U=$duynhesF^q+fE{">dry_kick_clip</field></block></value><value name="ADD5"><block type="variables_get" id="SL9X[*@|oNVyK?C8EBBq"><field name="VAR" id="e%u@zo7vTy_$JaW0hU76">closed_hi_hat_clip</field></block></value></block></value><next><block type="typescript_statement" id="guy)iAzqQZW_lp+(1:uG" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function advance_lfsr(gs: bopit_gamestate) { // should work? js converts 64bit fp Numbers to 32bit signed ints before bitwise ops - scary" line1="    let bit2 = gs.lfsr &amp; 1;" line2="    gs.lfsr &gt;&gt;= 1;" line3="    if(bit2) {" line4="        gs.lfsr ^= 0xA3000000;" line5="    }" line6="}" numlines="7"></mutation><next><block type="variables_set" id="Rz=I*7Vt_*AIZwB}X`iy"><field name="VAR" id="XPb*(ghi*lwu/8$g4WfD">note_length_multipliers</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="WoI3H.zU(0Av(ZQhx06O" inline="false"><mutation items="7"/><value name="ADD0"><shadow type="math_number" id="r]81ETq@]87Cox7N2j};"><field name="NUM">1</field></shadow></value><value name="ADD1"><shadow type="math_number" id="Ph~=~JN[0T,mvJxx3Uf{"><field name="NUM">1</field></shadow></value><value name="ADD2"><shadow type="math_number" id="=sPL6OlC9NA^eJIRfxB@"><field name="NUM">2</field></shadow></value><value name="ADD3"><shadow type="math_number" id="1P:v@E%pTR;/WS0Ktxh`"><field name="NUM">1</field></shadow></value><value name="ADD4"><shadow type="math_number" id="!:Aiyp],{b^It^Pq/Pr5"><field name="NUM">1</field></shadow></value><value name="ADD5"><shadow type="math_number" id="]1^_%mY/7u;3p}B^e=={"><field name="NUM">2</field></shadow></value><value name="ADD6"><shadow type="math_number" id="WM;ejG3cCt[Z;*vF5Tpb"><field name="NUM">65535</field></shadow></value></block></value><next><block type="variables_set" id="[XL4-w`3CjC({t[;|pYF"><field name="VAR" id="sKpZ^*R$)NT)XF}kA9.Q">speed_schedule</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="=.DO]I^l.HT2Sr8S-Xd9" inline="false"><mutation items="9"/><value name="ADD0"><block type="lists_create_with" id="J;(Q{nQHZwR7eQ?0zr(;"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="/bz9/Ve.D`/8~vPHT]f/"><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="+~@0@EZi1*SC_6mf#,{K"><field name="NUM">250</field></shadow></value></block></value><value name="ADD1"><block type="lists_create_with" id="taPIx1C;EE43]B|JJ2B~"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="l}DBf1tLC=u+8gR!)cK/"><field name="NUM">12</field></shadow></value><value name="ADD1"><shadow type="math_number" id="tP3i:sTqaJI$y4T9fW(l"><field name="NUM">227</field></shadow></value></block></value><value name="ADD2"><block type="lists_create_with" id="qnvKGG[qS|^T5Qg|{Y,n"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="YN9K)+S/~%UMdX4Q9Apo"><field name="NUM">24</field></shadow></value><value name="ADD1"><shadow type="math_number" id="JT2J2*Q3QnHbkklAFiq7"><field name="NUM">208</field></shadow></value></block></value><value name="ADD3"><block type="lists_create_with" id="Di[?v0S72T3s+5L?$|y*"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="~(H+^ejo)Y7vI:$z)wII"><field name="NUM">36</field></shadow></value><value name="ADD1"><shadow type="math_number" id="x3G8YoFr;(sd!_}R{O?z"><field name="NUM">187</field></shadow></value></block></value><value name="ADD4"><block type="lists_create_with" id="T@s#1V;:yn-rwv4/=AA-"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="alfY?3hvStc||[}a+0l~"><field name="NUM">48</field></shadow></value><value name="ADD1"><shadow type="math_number" id="A(]c(tA,p$8.t7mDe_f!"><field name="NUM">174</field></shadow></value></block></value><value name="ADD5"><block type="lists_create_with" id=";-fe9d7FN_z[iC,rk[Zu"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="cNz/=5s[nDgo[5^.n{6R"><field name="NUM">60</field></shadow></value><value name="ADD1"><shadow type="math_number" id="?QDrPkbiP^9b8o_Jy6aX"><field name="NUM">163</field></shadow></value></block></value><value name="ADD6"><block type="lists_create_with" id="k%!V.h+c024a~tu6B{_r"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="w@xd=;~qY1L6g|oa_)Po"><field name="NUM">72</field></shadow></value><value name="ADD1"><shadow type="math_number" id="4CB~e~+seh)4|{BzTF5d"><field name="NUM">156</field></shadow></value></block></value><value name="ADD7"><block type="lists_create_with" id="y2E^y#+Lep2W=[+0)x8w"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="bk9_MX;s[*t:oPh}esFV"><field name="NUM">84</field></shadow></value><value name="ADD1"><shadow type="math_number" id=".qo5e{Jm^;c$G7phSuac"><field name="NUM">150</field></shadow></value></block></value><value name="ADD8"><block type="lists_create_with" id="q:d7[s4+72G|SIj/h-e@"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="3,DaDmc$+pzs1fj56VgN"><field name="NUM">65535</field></shadow></value><value name="ADD1"><shadow type="math_number" id="4v2~}CD{Gc,JSZHhi=,|"><field name="NUM">100</field></shadow></value></block></value></block></value><next><block type="variables_set" id="up?gy|beSR:0wj!|zQHQ"><field name="VAR" id="q-rFn?+PRpqn!vB=coo8">motor_hysteresis</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="6E-IkQ[qrN`8Hbb@McCX"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="KW2_Z.6YFWr*V}7{!iV1"><field name="NUM">768</field></shadow></value><value name="ADD1"><shadow type="math_number" id=";N;IBZGwape?pk`afT@4"><field name="NUM">512</field></shadow></value></block></value><next><block type="variables_set" id="9w|3M6Z?M}w$;R0YQ07~"><field name="VAR" id="f8|]atRDU.hJstsL1WLv">shaker_hysteresis</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="cPTeZtOtr?k1LNih)Nd]"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="+9etu-MC3da92}`skY^8"><field name="NUM">2048</field></shadow></value><value name="ADD1"><shadow type="math_number" id=")i_uI{a:=I2=r$7==G^/"><field name="NUM">512</field></shadow></value></block></value><next><block type="console_log" id=")IcK.P~$2s1hg`=Jo?)="><value name="value"><shadow type="text" id="8GH*Plst9ZMx2V,_~|x("><field name="TEXT">this is not how this will be instantiated; will happen in a constructor called from main then passed to bopit_update_state from there</field></shadow></value><next><block type="typescript_statement" id="Qf^z5-d+d[o{Ob6T~#gb" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let bopit_gamestate_t = {" line1="    t_now: 0," line2="    t_next_beat: 0," line3="    lost: 0," line4="    ms_per_eighth_note: speed_schedule[0][1]," line5="    measure_number: 0," line6="    expected_action: bopit_action_e.BOPIT_ACTION_TWIST," line7="    t_this_action: 0, //gs-&gt;t_measure_start + 10 * gs-&gt;ms_per_eighth_note; //dont quite understand these yet" line8="    t_measure_start: 0, //-((int32_t)gs-&gt;ms_per_eighth_note) * 4;" line9="    action_window: 200," line10="    beat_state: beat_enum_e.BEAT_ENUM_BEAT_2," line11="    lfsr: 0xA5CE5b3A," line12="    bop_debouncer: {" line13="        prev_sample: false," line14="        last_edge_time: 0," line15="        debounce_interval: 10," line16="        button_out: false" line17="    }," line18="    button_prev: undefined as boolean," line19="    motor_prev: 0," line20="    shaker_prev: 0," line21="    tlastedge_button: undefined as number," line22="    tlastedge_motor: undefined as number," line23="    tlastedge_shaker: undefined as number," line24="    pending_audio: undefined as audio_clip" line25="};" numlines="26" declaredvars="bopit_gamestate_t"></mutation><next><block type="typescript_statement" id="W,OBRZ.%k7meHtr7M]51" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function bopit_update_state(gs: bopit_gamestate, input: bopit_user_input, dt_ms: number) {" line1="    gs.t_now += dt_ms;" line2="" line3="    // update state variables as appropriate on beats" line4="    if (gs.t_now &gt;= gs.t_next_beat) {" line5="        // advance beat state variables" line6="        gs.beat_state++;" line7="        if (gs.beat_state == beat_enum_e.BEAT_ENUM_NUM_BEATS) {" line8="            gs.beat_state = beat_enum_e.BEAT_ENUM_BEAT_1;" line9="            gs.t_measure_start = gs.t_next_beat;" line10="        }" line11="" line12="        // speed up if appropriate" line13="        if (gs.beat_state == beat_enum_e.BEAT_ENUM_BEAT_1) {" line14="            gs.measure_number++;" line15="            let sched_slot;" line16="            for (sched_slot = 1; speed_schedule[sched_slot][0] &lt; gs.measure_number; sched_slot++);" line17="            gs.ms_per_eighth_note = speed_schedule[sched_slot - 1][1];" line18="        }" line19="" line20="        // select proper sound to make pending" line21="        if (gs.beat_state == beat_enum_e.BEAT_ENUM_BEAT_1) {" line22="            for (let i = 0; i &lt; 4; i++, advance_lfsr(gs));" line23="            let clip_selection = (gs.lfsr &amp; 0x03);" line24="            //gs.pending_audio = action_to_cliptable_map[gs.expected_action][clip_selection];" line25="        } else if (gs.beat_state == beat_enum_e.BEAT_ENUM_BEAT_1_5) {" line26="            for (let j = 0; j &lt; 4; j++, advance_lfsr(gs));" line27="            let clip_selection2 = (gs.lfsr &amp; 0x03);" line28="            //gs.pending_audio = it_clips[clip_selection2];" line29="        } else {" line30="            //gs.pending_audio = sound_schedule[gs.beat_state];" line31="        }" line32="" line33="        // calculate next beat time" line34="        gs.t_next_beat += note_length_multipliers[gs.beat_state] * gs.ms_per_eighth_note;" line35="" line36="        // If we just played beat 4, schedule the next expected UI action" line37="    } else {" line38="        // clear pending sound" line39="        gs.pending_audio = undefined as audio_clip;" line40="    }" line41="    //gs-&gt;pending_audio = NULL;" line42="" line43="    // update ui beattimes" line44="    let button_now = debounce_button(gs.bop_debouncer, (input.button != 0), gs.t_now);" line45="    let motor_now = (input.motor_voc_q8_8 &gt; motor_hysteresis[(gs.motor_prev ? 1 : 0)]);" line46="    let shaker_now = (input.shaker_voc_q8_8 &gt; shaker_hysteresis[(gs.shaker_prev ? 1 : 0)]);" line47="" line48="    let button_trig = false;" line49="    let motor_trig = false;" line50="    let shaker_trig = false;" line51="    if (button_now &amp;&amp; !gs.button_prev) {" line52="        gs.tlastedge_button = gs.t_now;" line53="        button_trig = true;" line54="    }" line55="    if (motor_now &amp;&amp; !gs.motor_prev) {" line56="        gs.tlastedge_motor = gs.t_now;" line57="        motor_trig = true;" line58="    }" line59="    if ((shaker_now &amp;&amp; !gs.shaker_prev) &amp;&amp; ((gs.t_now - gs.tlastedge_shaker) &gt; SHAKER_BACKLASH)) {" line60="        gs.tlastedge_shaker = gs.t_now;" line61="        shaker_trig = true;" line62="    }" line63="" line64="    // check to see if the person missed a command" line65="    //if (button_trig || motor_trig || shaker_trig ||" line66="    if (motor_trig || shaker_trig ||" line67="        (gs.t_now &gt; (gs.t_this_action + (gs.action_window / 2)))) {" line68="        // check that the person did the right one" line69="        if ((true) ||" line70="            (gs.t_now &gt; (gs.t_this_action + (gs.action_window / 2))) ||" line71="            (gs.t_now &lt; (gs.t_this_action - (gs.action_window / 2)))) {" line72="            gs.lost = true;" line73="        }" line74="" line75="" line76="        for (let k = 0; k &lt; 4; k++, advance_lfsr(gs));" line77="" line78="        //gs-&gt;expected_action = ((uint8_t)gs-&gt;lfsr) % BOPIT_ACTION_NUM_ACTIONS;" line79="        //gs-&gt;expected_action = BOPIT_ACTION_TWIST;" line80="        gs.expected_action = (gs.lfsr &amp; 0x01) ? bopit_action_e.BOPIT_ACTION_TWIST : bopit_action_e.BOPIT_ACTION_SHAKE;" line81="" line82="        // TODO: this logic is slightly wrong when tempo increases." line83="        gs.t_this_action = gs.t_measure_start + (gs.ms_per_eighth_note * 10);" line84="    }" line85="" line86="    gs.button_prev = button_now;" line87="    gs.motor_prev = motor_now;" line88="    gs.shaker_prev = shaker_now;" line89="" line90="" line91="" line92="}" numlines="93"></mutation><next><block type="typescript_statement" id="L0EtZ46GK:o;p0yb5g}T" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function get_pending_audio_clip(gs: bopit_gamestate) {" line1="    return gs.pending_audio;" line2="}" numlines="3"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="!EbT#7)~W]1#[blo{q6$" x="0" y="0"><mutation name="edges_to_bopit_action_e" functionid="{C;B|)^[B-J,;@x87tMP"><arg name="button_edge" id="12in7xemywfk4wyqv0cs5b" type="boolean"/><arg name="motor_edge" id="7idy3wjaoh8dd51mk5xl" type="boolean"/><arg name="shaker_edge" id="s5s4d5q0z7qjf7ho6xnwrp" type="boolean"/></mutation><field name="function_name">edges_to_bopit_action_e</field><value name="12in7xemywfk4wyqv0cs5b"><shadow type="argument_reporter_boolean" id="jPzd!,131sUV4Nt{s+]Z"><field name="VALUE">button_edge</field></shadow></value><value name="7idy3wjaoh8dd51mk5xl"><shadow type="argument_reporter_boolean" id="@.Sk*qqS8cQIA.Ockv2u"><field name="VALUE">motor_edge</field></shadow></value><value name="s5s4d5q0z7qjf7ho6xnwrp"><shadow type="argument_reporter_boolean" id="iHqm1~yB5Z;o;2o^w/bX"><field name="VALUE">shaker_edge</field></shadow></value><statement name="STACK"><block type="controls_if" id="Fx=oD)g$sLuc6.l0fs*Q"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="l0h,g,4QnT=yJ?lc%wei"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="ZNcj=JMZ5z:iu5=}7ooj"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="argument_reporter_boolean" id="^y{K1%_7J)aU^L7y}1pX"><field name="VALUE">button_edge</field></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="EW;sb@p.oioKmx(dd~aY"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="argument_reporter_boolean" id="3[_~c$mnn:c:cTb,YPxY"><field name="VALUE">motor_edge</field></block></value></block></value></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="C*%]+`h-2HcbpzKD,4A]"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="argument_reporter_boolean" id="/Ia.?tH8vi~f:1g{Q25E"><field name="VALUE">shaker_edge</field></block></value></block></value></block></value><statement name="DO0"><block type="function_return" id="S@D8h/p)Gx[G~JF^,BE%"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="U,_|h)C%tlIZW48.:vc:"><field name="TEXT">BOPIT_ACTION_BOP</field></block></value></block></statement><next><block type="controls_if" id="Ow$Z?O]$vJnOCzRPdPsj"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="{=oIe:qJ*3j)_.4KJCNJ"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="jibrPFoE(){0mCT)XveB"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="+sLppFi=C3jI(`kQ2/!U"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="argument_reporter_boolean" id="l4]Qm#Sh;N4mp;ayWt]L"><field name="VALUE">button_edge</field></block></value></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="argument_reporter_boolean" id="c:D0t!M1zxZ5^F{IgzZq"><field name="VALUE">motor_edge</field></block></value></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="Wf5^1YLhm#P{Cs4-oo/%"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="argument_reporter_boolean" id="`~clSY:Shn}V-!/Wk62p"><field name="VALUE">shaker_edge</field></block></value></block></value></block></value><statement name="DO0"><block type="function_return" id="c8/NZ)e~L;p%WdpjLj{i"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="OjP(+M]v;;-W_rRykVwV"><field name="TEXT">BOPIT_ACTION_TWIST</field></block></value></block></statement><next><block type="controls_if" id="f7w`qyJba;zaw0-a8J#o"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="xOLN1ZZAW9lW(#Lxbvy."><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="Z}mDP5!Xl-{W-Chg_bxH"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="o@V;Q;OQGz7b]@C|fxp/"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="argument_reporter_boolean" id="|Jkxcd=Tol*Gm{VN[!-H"><field name="VALUE">button_edge</field></block></value></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="FrkWK3CRS0XX+%%_}eN="><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="argument_reporter_boolean" id="#k=am*LB{B5n*1F5Rdp8"><field name="VALUE">motor_edge</field></block></value></block></value></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="argument_reporter_boolean" id="7h.4g7UwrUvT:0RpB0ou"><field name="VALUE">shaker_edge</field></block></value></block></value><statement name="DO0"><block type="function_return" id="1G!Kzwul)D+#mBtO])jX"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="d1B0q]M9Revj%(.eK@uV"><field name="TEXT">BOPIT_ACTION_SHAKE</field></block></value></block></statement><next><block type="function_return" id="eF-:#OI@=?1/FcMTRTMl"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="^4|9jJ|WrWsV3GQhSss%"><field name="TEXT">BOPIT_ACTION_NUM_ACTIONS</field></block></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" id=")G8*:vB*:L.;vD0yF[O0" x="655" y="1340"><mutation name="time_now" functionid="7s,.;hja[[.[zw=3E?P-"/><field name="function_name">time_now</field><statement name="STACK"><block type="function_return" id="?k9{xO/1YnklWW4pt:$w"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id=".yJA#?bMsyLEiTS2fO7g"><field name="NUM">0</field></shadow></value></block></statement></block><block type="pxt-on-start" id="2]1ID9}y^;38Br98`BK)" x="-45" y="1660"><statement name="HANDLER"><block type="console_log" id="n6dXgDyTuB3}*n^vf5)1"><value name="value"><shadow type="text" id="B]0W]SEc/,!m@c^IG:dj"><field name="TEXT">This is just using the simplest native blocks possible.</field></shadow></value><next><block type="console_log" id="sV]6YXHM5mUY|$2q2Fd1"><value name="value"><shadow type="text" id="/e*AF48BBpG2S2)#_nV|"><field name="TEXT">debounce.h</field></shadow></value><next><block type="variables_set" id="Jl[!ly^/u@dY/^~W*Am1"><field name="VAR" id="H$D]NeMqRfCt0V*9w=1B">debounce_interval</field><value name="VALUE"><shadow type="math_number" id="xSH_S,v?r;:Jt._6aYfQ"><field name="NUM">10</field></shadow></value><next><block type="console_log" id="NH.K?!(8xRa)}MeoGd;6"><value name="value"><shadow type="text" id="f]8MUGcVMf/6|4Yd5U1("><field name="TEXT">debounce.c</field></shadow></value><next><block type="console_log" id="M9LG]lu(T;C2q7zqG?qo"><value name="value"><shadow type="text" id="5Xvy$tNw(BD,~#U|PIV_"><field name="TEXT">Put this logic in the 'update state' portion, not in a function</field></shadow></value><next><block type="controls_if" id="0+0Eu[_;h$%qljVs01,~"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="3#PG5dK4}cj(Dqpx|b!R"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="]5SY6Zs}.|au.GB,3KU7"><field name="VAR" id="GTp%:E,z]8PoRiDX4JBh">button</field></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="uy(RP?U|6LiGaLW9LtsQ"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="JaQWvRg;$EVg!vk5Y#qe"><field name="VAR" id="k%HfqAs;v3:.ut|O54;s">prev_sample</field></block></value></block></value></block></value><statement name="DO0"><block type="variables_set" id="O@8T14%v:fy%aZc)O^@)"><field name="VAR" id="YOX[?O`C,[XT3V?O/9e3">last_edge_time</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id=":f/|43`u!g#/`#y?-L4g"><mutation name="time_now" functionid="7s,.;hja[[.[zw=3E?P-"/></block></value></block></statement><next><block type="controls_if" id="{#1CIQ$Gk]Oa{$h5Gzz~"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="-1;z5dq9rhWhu+)6%9pm"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="dFLPQWG5Ddi}Y)ze-IFU"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="g($IFV^vQN^Q:A^^rTt,"><field name="VAR" id="GTp%:E,z]8PoRiDX4JBh">button</field></block></value></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="6D5Oaz1Jwh(`Gb/5u^3!"><field name="VAR" id="k%HfqAs;v3:.ut|O54;s">prev_sample</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="Qu88Uf+,vPY0p$H|Z_qA"><field name="VAR" id="YOX[?O`C,[XT3V?O/9e3">last_edge_time</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="n2yAn~)2yVh8#=C=YkjV"><mutation name="time_now" functionid="7s,.;hja[[.[zw=3E?P-"/></block></value></block></statement><next><block type="variables_set" id="hASi$YO@-:MfI8R|;Oyh"><field name="VAR" id="k%HfqAs;v3:.ut|O54;s">prev_sample</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="kHeK9WfU]kCgZ)y0m4P;"><field name="VAR" id="GTp%:E,z]8PoRiDX4JBh">button</field></block></value><next><block type="controls_if" id="]uQ^rBakMK)L,,,Ch^zQ"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="_N~UwN+fEu;[UGj!I`w0"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="T7P%uib%cE[1lp%:Myg$"><field name="OP">MINUS</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="@+GS2g`BN]6J-Ns7/xsI"><mutation name="time_now" functionid="7s,.;hja[[.[zw=3E?P-"/></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="iSs%5-Z(nN$!a|S`.rKq"><field name="VAR" id="YOX[?O`C,[XT3V?O/9e3">last_edge_time</field></block></value></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="0Ta4HE)upv2B}ZD~~e~M"><field name="VAR" id="H$D]NeMqRfCt0V*9w=1B">debounce_interval</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="b^`eNwkG]Ov6F(JvEe%w"><field name="VAR" id="APOiDO2)qQVTV0n)5g7[">button_out</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="KQmo#Iv!V99C$P))[y%n"><field name="VAR" id="GTp%:E,z]8PoRiDX4JBh">button</field></block></value></block></statement><next><block type="console_log" id="og{ST*}3#b?(_2xcBPO%"><value name="value"><shadow type="text" id="7qsS^g08Nj!T_NZy3nYB"><field name="TEXT">game.h</field></shadow></value><next><block type="variables_set" id="sB5}CXAND#W[;{8)YB!="><field name="VAR" id="kNs3Z=WYu$u#0uA^v-9!">actions</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="~v84_N_DsQZD%v+5JAQ%"><mutation items="4"/><value name="ADD0"><shadow type="text" id="yQ}iWesn(w`P=JTbv.mS"><field name="TEXT">twist</field></shadow></value><value name="ADD1"><shadow type="text" id="zV:s5hjI_{US7#v,Mol^"><field name="TEXT">shake</field></shadow></value><value name="ADD2"><shadow type="text" id="?^aZ-/d}%Htvoz9jpa;{"><field name="TEXT">bop</field></shadow></value><value name="ADD3"><shadow type="text" id="J7Z2Ps$zt!sy:GPB%2t6"><field name="TEXT">none</field></shadow></value></block></value><next><block type="variables_set" id="SmP99on[[g/vM[1Sc%Wy"><field name="VAR" id="}|G@s56SXz9CGYURjBN]">bopit_action_e</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="3y1+5uQd4N#FTOF%n8wZ"><mutation items="4"/><value name="ADD0"><shadow type="text" id="1u(z_7R{AsifT;s6WW2C"><field name="TEXT">BOPIT_ACTION_BOP</field></shadow></value><value name="ADD1"><shadow type="text" id="8)TI8Le]bX2ncZU-jucd"><field name="TEXT">BOPIT_ACTION_TWIST</field></shadow></value><value name="ADD2"><shadow type="text" id="!9`^O4VWw9vk[%W^TVz-"><field name="TEXT">BOPIT_ACTION_SHAKE</field></shadow></value><value name="ADD3"><shadow type="text" id="3Pn0o)4ChrnSkmGcpL;K"><field name="TEXT">BOPIT_ACTION_NUM_ACTIONS</field></shadow></value></block></value><next><block type="variables_set" id="@T^]$v:l?P92l_3]D|,U"><field name="VAR" id="(8Y:.T0bfoKac}i_F)=o">beats</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="E-z@erS@D#Sj!:Ngky}`" inline="false"><mutation items="7"/><value name="ADD0"><shadow type="math_number" id="8%uzsmOnkfaY!_cP4?T?"><field name="NUM">1</field></shadow></value><value name="ADD1"><shadow type="math_number" id="%M11:`:-ByxD]t7u(KLL"><field name="NUM">1.5</field></shadow></value><value name="ADD2"><shadow type="math_number" id="B6uvZ9P+LHnk/T(+$]Jv"><field name="NUM">2</field></shadow></value><value name="ADD3"><shadow type="math_number" id="tQ_R+VncbVT(43ix~Q,S"><field name="NUM">3</field></shadow></value><value name="ADD4"><shadow type="math_number" id="h+ZHaa5*5a@BX`9{2y3@"><field name="NUM">3.5</field></shadow></value><value name="ADD5"><shadow type="math_number" id="Fc=!#3zJ_c/|f9{g]lxa"><field name="NUM">4</field></shadow></value><value name="ADD6"><shadow type="math_number" id="h5c*Bs$/2i|G3p$3]1p{"><field name="NUM">-1</field></shadow></value></block></value><next><block type="variables_set" id="$.##)QcP%Va6+O$Fk}xg"><field name="VAR" id="GTp%:E,z]8PoRiDX4JBh">button</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="q_gQYt{BqozYb5sI:gNy"><field name="BOOL">FALSE</field></block></value><next><block type="console_log" id="0@Ff^kvyv2qwm)+;j0np"><value name="value"><shadow type="text" id="MZO}E*%.o83T:Kk4%9j|"><field name="TEXT">game.c</field></shadow></value><next><block type="variables_set" id="@4cknn(rPRchfqh-Ab!y"><field name="VAR" id="3hOTemx!rUcZpUy4s?tU">SHAKER_BACKLASH</field><value name="VALUE"><shadow type="math_number" id="NlX!^I!5jow{R=FQ~ecX"><field name="NUM">600</field></shadow></value><next><block type="variables_set" id="/9A0rz7:E{D9z:[G_i^`"><field name="VAR" id=".Drhw|b{yTm#(p-kX(C~">it_clips</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="5kj?,hIi`ZH;gmK]Myw0"><mutation items="4"/><value name="ADD0"><shadow type="math_number" id=";#,n1LHcyM5qbCu^13ey"><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="$h{AG5i$b@FJB4}s:|50"><field name="NUM">0</field></shadow></value><value name="ADD2"><shadow type="math_number" id="X{3e=ahINAq$:9UuSy,]"><field name="NUM">0</field></shadow></value><value name="ADD3"><shadow type="math_number" id="cs_$hdp7*-~5mY3~!%_#"><field name="NUM">0</field></shadow></value></block></value><next><block type="variables_set" id="us)2Ny?Ozi!,$)s152`J"><field name="VAR" id="d3e!$Jc|z{T~i|acspwI">twist_clips</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="}6,+Y`|I+5B)}(|dyeGU"><mutation items="4"/><value name="ADD0"><shadow type="math_number" id="gmX~4]rk%iw4a_ob*I4b"><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="93tkEg]D!T;etl5upyc."><field name="NUM">0</field></shadow></value><value name="ADD2"><shadow type="math_number" id="a6{AwCXH82zbjZcE[!/D"><field name="NUM">0</field></shadow></value><value name="ADD3"><shadow type="math_number" id="*56xVh#D$D3z#p3vGikP"><field name="NUM">0</field></shadow></value></block></value><next><block type="variables_set" id="6l6]KyGRNK{O(#-C+YUb"><field name="VAR" id="}tU=p%E!@/gZ@P(ci8j(">shake_clips</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="3P!|;Kxgohj_3o`}Dcv("><mutation items="4"/><value name="ADD0"><shadow type="math_number" id="SSr.`#JRhA?I@34TVE$6"><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="0P9/$gUDW=SRP,1u!~s;"><field name="NUM">0</field></shadow></value><value name="ADD2"><shadow type="math_number" id="pCIb8+xQ2Fwh3FdwRiIb"><field name="NUM">0</field></shadow></value><value name="ADD3"><shadow type="math_number" id="J]*XSJ3l:|7~O(E_.O^c"><field name="NUM">0</field></shadow></value></block></value><next><block type="variables_set" id="_s:{ipSWoWemJ|LsYUoP"><field name="VAR" id=")jR`d5%^b;0[$IBl-oAi">bop_clips</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id=")L.gL2$2sQgdPYgkt%$S"><mutation items="4"/><value name="ADD0"><shadow type="math_number" id="jt|[:D?P_uh7Of6MdT47"><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="UhQ)HdymVj~_@M8TVS~d"><field name="NUM">0</field></shadow></value><value name="ADD2"><shadow type="math_number" id="CQ@%+qA~iPjwK4XY@=?H"><field name="NUM">0</field></shadow></value><value name="ADD3"><shadow type="math_number" id="qEQDAcLeH-pQP=8(4EHW"><field name="NUM">0</field></shadow></value></block></value><next><block type="variables_set" id="9z?8hClApKEUCSKgO_7m"><field name="VAR" id="%}#~JeG][HKEZ2j|Ska3">action_to_cliptable_map</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="Mk=0z6H6%/~/Sx~8A,JN"><mutation items="3"/><value name="ADD0"><block type="variables_get" id=",pWQVawmGg~([V,Ks?iN"><field name="VAR" id="d3e!$Jc|z{T~i|acspwI">twist_clips</field></block></value><value name="ADD1"><block type="variables_get" id="[{E1ksA.=}Hl^Q;KPp8A"><field name="VAR" id="}tU=p%E!@/gZ@P(ci8j(">shake_clips</field></block></value><value name="ADD2"><block type="variables_get" id="sN649UUt4v~Q1FMD4M-~"><field name="VAR" id=")jR`d5%^b;0[$IBl-oAi">bop_clips</field></block></value></block></value><next><block type="variables_set" id="JR)4TpqxT=Sm}jX(Cz?a"><field name="VAR" id="0O)2%*{.h48=j^7Q7*t~">sound_schedule2</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="eJXbwvTs=4LM7k~2ke*9" inline="false"><mutation items="6"/><value name="ADD0"><block type="typescript_expression" id="8iyoX]bc.f})k;n}{#rF" editable="false"><field name="EXPRESSION">null</field></block></value><value name="ADD1"><block type="typescript_expression" id="4z^r:D.oimfX!yilzI}n" editable="false"><field name="EXPRESSION">null</field></block></value><value name="ADD2"><block type="variables_get" id="2E3Yd$,V;_:gLgz7x4(o"><field name="VAR" id="5z/=VK[mZ#rKcNGjW#I@">closed_hi_hat_clip2</field></block></value><value name="ADD3"><block type="variables_get" id="?*[[^6zNS5^4m6d8}3.#"><field name="VAR" id="0,$=C.GHAI35@g|*#pyt">dry_kick_clip2</field></block></value><value name="ADD4"><block type="variables_get" id="c!.q5A{9D-.9ntiWAwXu"><field name="VAR" id="0,$=C.GHAI35@g|*#pyt">dry_kick_clip2</field></block></value><value name="ADD5"><block type="variables_get" id="hTBu;Xh)3^64P]u@/YM4"><field name="VAR" id="5z/=VK[mZ#rKcNGjW#I@">closed_hi_hat_clip2</field></block></value></block></value><next><block type="variables_set" id="WssjkTZt5iq?:.qv/49S"><field name="VAR" id="XPb*(ghi*lwu/8$g4WfD">note_length_multipliers</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="K^G,}Z:#)EM)R;-xn.yK" inline="false"><mutation items="7"/><value name="ADD0"><shadow type="math_number" id="V!0i|zEnb}M7U{vtj:qL"><field name="NUM">1</field></shadow></value><value name="ADD1"><shadow type="math_number" id="[_s(W`{yue?5!qP%(Zat"><field name="NUM">1</field></shadow></value><value name="ADD2"><shadow type="math_number" id="AD!{Yj85!@9K{0PVd=Jq"><field name="NUM">2</field></shadow></value><value name="ADD3"><shadow type="math_number" id="ii|hz7j+A6`,$:s]8iuF"><field name="NUM">1</field></shadow></value><value name="ADD4"><shadow type="math_number" id="9Yjah.6=OB6Z`83bFSQ%"><field name="NUM">1</field></shadow></value><value name="ADD5"><shadow type="math_number" id="D$33IRG/s[R}PsLh]q?i"><field name="NUM">2</field></shadow></value><value name="ADD6"><shadow type="math_number" id="iWJD)qm@z2DKe{t=_=rX"><field name="NUM">65535</field></shadow></value></block></value><next><block type="variables_set" id="YTkPt4HP62XlvLYE8]y}"><field name="VAR" id="sKpZ^*R$)NT)XF}kA9.Q">speed_schedule</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="tGra}{v#ZqO;95o/oS[Z" inline="false"><mutation items="9"/><value name="ADD0"><block type="lists_create_with" id="v%Scf:=pe{e~{[Zp!oh+"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="K;RqzjNen-TdjE0_6(U!"><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="Lt-q6!f~z}_/Ha1aiE6f"><field name="NUM">250</field></shadow></value></block></value><value name="ADD1"><block type="lists_create_with" id="#wLOwD}?}lDxGf+tp.6S"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="S:REgj^.;8@]EGDnZUXV"><field name="NUM">12</field></shadow></value><value name="ADD1"><shadow type="math_number" id="6vi#y957l{w-|d#*TNdZ"><field name="NUM">227</field></shadow></value></block></value><value name="ADD2"><block type="lists_create_with" id="Zj(*cvY5I}Tmbdtpx(M_"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="ickDKV]C}PX.TgKa)!5;"><field name="NUM">24</field></shadow></value><value name="ADD1"><shadow type="math_number" id="8uw6iFwS!kG8d)V#$PY4"><field name="NUM">208</field></shadow></value></block></value><value name="ADD3"><block type="lists_create_with" id="1@0.TvUZ]*[yow^74N!A"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="qPDdp*~aEvR,@P#l?XX]"><field name="NUM">36</field></shadow></value><value name="ADD1"><shadow type="math_number" id="i]!n~*;!@E$SUI8GF1bq"><field name="NUM">187</field></shadow></value></block></value><value name="ADD4"><block type="lists_create_with" id="ue*}1t17Cglw8RiG06g`"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="?UAtT`3i8.c[8HINV7rj"><field name="NUM">48</field></shadow></value><value name="ADD1"><shadow type="math_number" id="dVO#-wZHZYD@?Nld*~B?"><field name="NUM">174</field></shadow></value></block></value><value name="ADD5"><block type="lists_create_with" id="*KchPRk}y;.!]^K}m#*="><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="p{l=]KS(@u+|{oyXm`Uk"><field name="NUM">60</field></shadow></value><value name="ADD1"><shadow type="math_number" id="H]xF%}#;@;fzc0`B^}f8"><field name="NUM">163</field></shadow></value></block></value><value name="ADD6"><block type="lists_create_with" id="X@1UnxCsVKw1gpXiL?V+"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="v(W2)4vr*mD|]%;s!gS4"><field name="NUM">72</field></shadow></value><value name="ADD1"><shadow type="math_number" id="sFn!AOBr*+}7QrZ4,u9$"><field name="NUM">156</field></shadow></value></block></value><value name="ADD7"><block type="lists_create_with" id="TfnpBd{S){^54XT8a+du"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="ym=(]F,Ug6kpyuUf!f-*"><field name="NUM">84</field></shadow></value><value name="ADD1"><shadow type="math_number" id="ME{o4;zt~+-3+}+LJTWI"><field name="NUM">150</field></shadow></value></block></value><value name="ADD8"><block type="lists_create_with" id="=mSP9ZgNC4]_*SKwyQ1`"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="sL?^TnR#M[wn~l)IhfUy"><field name="NUM">65535</field></shadow></value><value name="ADD1"><shadow type="math_number" id=",Fpq)(|?R]0=3hsHvxet"><field name="NUM">100</field></shadow></value></block></value></block></value><next><block type="variables_set" id="xQ{:bu]`?ss;gf0Xu,0;"><field name="VAR" id="q-rFn?+PRpqn!vB=coo8">motor_hysteresis</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="^g3uDNPNqESkxaW~IT0K"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="RO2sAlKb8vTAxvG)UNWQ"><field name="NUM">768</field></shadow></value><value name="ADD1"><shadow type="math_number" id="s}Q^5@tnC]vqyL`T6x_z"><field name="NUM">512</field></shadow></value></block></value><next><block type="variables_set" id="I8P,%wEROO6GQvW/t@r`"><field name="VAR" id="f8|]atRDU.hJstsL1WLv">shaker_hysteresis</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="-3GmfRKTmDT`N-W:Em%E"><mutation items="2"/><value name="ADD0"><shadow type="math_number" id="v.vl]-]o{@hC4U{EJ9x~"><field name="NUM">2048</field></shadow></value><value name="ADD1"><shadow type="math_number" id="Ooy}rtq_VpE!]9L{=oFj"><field name="NUM">512</field></shadow></value></block></value><next><block type="variables_set" id="]1O{Cjfy6hmI@?a*][27"><field name="VAR" id="-I9URcm![f-J?W5Yonm~">t_measure_start</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="MQG.|dh@$/5VN{m;2M|Q"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="2h{wCmWuXD4}6v;{lpO1"><field name="NUM">-4</field></shadow></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="WcPQ$Z0Px8bAu4DUG8zj"><field name="VAR" id=":anK!X9OMtTSPT5Q$bo3">ms_per_eighth_note</field></block></value></block></value><next><block type="variables_set" id="~hUS.ryC)_WTMzZ7qVZc"><field name="VAR" id=":anK!X9OMtTSPT5Q$bo3">ms_per_eighth_note</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_index_get" id="i$5ex?gtbG1LyOWk_GT!"><value name="LIST"><block type="lists_index_get" id=":U43GHCIGAWiqbWAmcPH"><value name="LIST"><block type="variables_get" id="Qh;SpXgXH0b9DNDPb7Mw"><field name="VAR" id="sKpZ^*R$)NT)XF}kA9.Q">speed_schedule</field></block></value><value name="INDEX"><shadow type="math_number" id="jXTIeRe5p:foYR_D+gP4"><field name="NUM">0</field></shadow></value></block></value><value name="INDEX"><shadow type="math_number" id="]ALVFId3WN?b[DeEUrep"><field name="NUM">1</field></shadow></value></block></value><next><block type="variables_set" id="Vdc5`JDFls%Ry^e/U7jI"><field name="VAR" id="5TRq:mo/=]5$rflC6){v">t_this_action</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="cTJz98{O]Z+S-KWi]WUD"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="Mks^Y0U9G5QoR{2+617L"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="Ue?xc8MZwV}50x]`TBHE"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="rC6IqiApQB}zv~KMj|[5"><field name="NUM">10</field></shadow></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="D$Rr}j6,HDXU#8[{(%Vm"><field name="VAR" id=":anK!X9OMtTSPT5Q$bo3">ms_per_eighth_note</field></block></value></block></value></block></value><next><block type="variables_set" id="ppQT7iE*n1c,LayK0V!K"><field name="VAR" id="/t`Z^`;2zi5)#|*z20t/">beat_state</field><value name="VALUE"><shadow type="math_number" id="+|t/WM#_xZUAC-#Q7ot@"><field name="NUM">2</field></shadow></value><next><block type="variables_set" id="W#sT{Dij+C]ARNK[{}7="><field name="VAR" id="}no`*+.l+Ht2jUchUz{[">lfsr</field><value name="VALUE"><shadow type="math_number" id="e;yES+67tWWvEyM`Be6o"><field name="NUM">2781764410</field></shadow></value><next><block type="variables_set" id="Bc^D?ur3/1$GW19J/dsV"><field name="VAR" id="k%HfqAs;v3:.ut|O54;s">prev_sample</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="lW^cv@/}J]Xv.px1YUsq"><field name="BOOL">FALSE</field></block></value><next><block type="variables_set" id="]h:io@|p$w]HB@#JQ3tv"><field name="VAR" id="YOX[?O`C,[XT3V?O/9e3">last_edge_time</field><value name="VALUE"><shadow type="math_number" id="4NY${]Uag}YHs?mH5|?H"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="$1qKA8AJhM@wwgghw{tG"><field name="VAR" id="H$D]NeMqRfCt0V*9w=1B">debounce_interval</field><value name="VALUE"><shadow type="math_number" id="Y-nI2R!gD#9-`5N:5OJI"><field name="NUM">10</field></shadow></value><next><block type="variables_set" id="9UKox;cS@MiJQU`Z+svK"><field name="VAR" id="APOiDO2)qQVTV0n)5g7[">button_out</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="TglsqbsdW0}qYW0ItF#Z"><field name="BOOL">FALSE</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="typescript_statement" id="-Z:^4uhHWLFOyYtLrC1X" disabled="true" editable="false" x="-450" y="1730"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let shaker_prev = 0" numlines="1" declaredvars="shaker_prev"></mutation><next><block type="typescript_statement" id=")nm%GKM!)`uli`|Qr8_L" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let motor_prev = 0" numlines="1" declaredvars="motor_prev"></mutation><next><block type="typescript_statement" id="ME[g-O-|@h{CU{kfn#aT" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let expected_action = 0" numlines="1" declaredvars="expected_action"></mutation><next><block type="typescript_statement" id="gOcX%%8@SBrq%]zN1t,V" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let measure_number = 0" numlines="1" declaredvars="measure_number"></mutation><next><block type="typescript_statement" id="WWI(07=?qHn?zx0A5hS*" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let lost = false" numlines="1" declaredvars="lost"></mutation><next><block type="typescript_statement" id="{ua:57$}N*Na~p+}$~+|" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let t_next_beat = 0" numlines="1" declaredvars="t_next_beat"></mutation><next><block type="typescript_statement" id="9|e%v~{)p$]t$4_iTSXy" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let t_now = 0" numlines="1" declaredvars="t_now"></mutation><next><block type="typescript_statement" id="jEG0.=?kJiZr|p+D0Et$" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let shaker_voc_q8_8 = 0" numlines="1" declaredvars="shaker_voc_q8_8"></mutation><next><block type="typescript_statement" id=",H3}?xIj*}47L+3vAU1)" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let motor_voc_q8_8 = 0" numlines="1" declaredvars="motor_voc_q8_8"></mutation><next><block type="typescript_statement" id="-c^kWZW7KH19:e6%uXNL" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let button = false" numlines="1" declaredvars="button"></mutation><next><block type="typescript_statement" id="atg!5z7y|3bd)57,|6bt" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let prev_sample = false" numlines="1" declaredvars="prev_sample"></mutation><next><block type="typescript_statement" id="-}C%{Nb!6#B1M-{4-te/" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let last_edge_time = 0" numlines="1" declaredvars="last_edge_time"></mutation><next><block type="typescript_statement" id="}!.3,f@_`naoQWU0Ig0d" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let button_out = false" numlines="1" declaredvars="button_out"></mutation><next><block type="typescript_statement" id="e7Y_SlCXlM]cv+uG8~+l" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let SHAKER_BACKLASH = 0" numlines="1" declaredvars="SHAKER_BACKLASH"></mutation><next><block type="typescript_statement" id="N_c/}o%`A*`VZ4^I2:wy" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let note_length_multipliers: number[] = []" numlines="1" declaredvars="note_length_multipliers"></mutation><next><block type="typescript_statement" id="t+vGWGjmJe)Bk/.}@5S," disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let speed_schedule: number[][] = []" numlines="1" declaredvars="speed_schedule"></mutation><next><block type="typescript_statement" id="v]6qwy4tqq58r6f[baoV" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let motor_hysteresis: number[] = []" numlines="1" declaredvars="motor_hysteresis"></mutation><next><block type="typescript_statement" id="jv$%2kNH)hv8`}NjDrGv" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let shaker_hysteresis: number[] = []" numlines="1" declaredvars="shaker_hysteresis"></mutation><next><block type="typescript_statement" id="-UhG;Xb]6S}K{yH;/sKJ" disabled="true" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let ms_per_eighth_note = 0" numlines="1" declaredvars="ms_per_eighth_note"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block><block type="function_definition" id="^cH+uF7ufqb%H)g)]0l;" x="650" y="3770"><mutation name="advance_lfsr_new" functionid="cz?ao(o,l|@F27V,n0]T"><arg name="num" id="i96fy8ymptitill1ddl8" type="number"/></mutation><field name="function_name">advance_lfsr_new</field><value name="i96fy8ymptitill1ddl8"><shadow type="argument_reporter_number" id="w[Ktz,2vYdVo=3^!1a4}"><field name="VALUE">num</field></shadow></value><statement name="STACK"><block type="variables_set" id="^UrSfo[:zw]J=goc{B7h"><field name="VAR" id="AAB=$~E|0!#7GA?CQpF1">bit</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_modulo" id="d)P*V)Rs,gehD*eU+jUX"><value name="DIVIDEND"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="a!9B_i0EnO)r;RIndy;/"><field name="VALUE">num</field></block></value><value name="DIVISOR"><shadow type="math_number" id="qr@Hcff^4OsLizsWQ/`B"><field name="NUM">2</field></shadow></value></block></value><next><block type="variables_set" id="7y]/xB{*XScF*;Zbwl7D"><field name="VAR" id="{bD:gy+}9){-h.ymsKc]">num</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="P`=Tm{nxEY6qX5k@DQ`d"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="mJap44To-m.w$=}KN9W~"><field name="VALUE">num</field></block></value><value name="B"><shadow type="math_number" id=",A,+;^JA:.O,IUepNr8t"><field name="NUM">2</field></shadow></value></block></value><next><block type="controls_if" id=",_@#V]YP/1Z2hX9m-}9+"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="tNttzTN%#|D5y0Og36Kd"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="Z3$VkVgU)oHnf`m0t1KV"><field name="VAR" id="AAB=$~E|0!#7GA?CQpF1">bit</field></block></value><value name="B"><shadow type="math_number" id="b:SwYm@0;{#o}-|.[O6Z"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="typescript_statement" id=".yj=T!%CoQtPn=F[?qG$" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="num = num ^ 0xA3000000;" numlines="1"></mutation></block></statement><next><block type="function_return" id="ngpJs|?~L_b!J*xX==~M"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="57qNoA6:}1#|bNsfIfH{"><field name="VALUE">num</field></block></value></block></next></block></next></block></next></block></statement></block><block type="forever" id="5o/HX3][0IIqxYL[M+9y" x="10" y="6430"><statement name="HANDLER"><block type="variables_set" id="08`3}J50am#6p}1`5fjz"><field name="VAR" id="MGhC@H[vpt/HTf5v]*G7">t_now</field><value name="VALUE"><shadow type="math_number" id="Mw{Q:3qIDM{5_xFFH4j,"><field name="NUM">0</field></shadow><block type="function_call_output" id="KAv6SYcWz4Ey6^F/dRw7"><mutation name="time_now" functionid="7s,.;hja[[.[zw=3E?P-"/></block></value><next><block type="controls_if" id="yXZ9~@o}sxwk4MW-f[x1"><value name="IF0"><shadow type="logic_boolean" id="1,,yZ2`.^Clm~2JgSsuM"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="B-Q:}vC{~Ur$.^bz223H"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="}Aj[U].5/9IA:B9HWGjy"><field name="NUM">0</field></shadow><block type="variables_get" id="[lV?*QR*t8OZpz{p:XVV"><field name="VAR" id="MGhC@H[vpt/HTf5v]*G7">t_now</field></block></value><value name="B"><shadow type="math_number" id="2gYriMMmH-}A*,9gzhAH"><field name="NUM">0</field></shadow><block type="variables_get" id="O6KsciK7gB~rB3lVIb_Y"><field name="VAR" id="b=CVt.j]xKYi$|Md84.6">t_next_beat</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="*R6Pi60|zMME(NuVJ/(A"><field name="VAR" id="/t`Z^`;2zi5)#|*z20t/">beat_state</field><value name="VALUE"><shadow type="math_number" id="^LGFHafhI?iw(N~0x,/E"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="X=VW^i:O[SI6*WPYn]@c"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="CI(P]G`,A=.oXhsZQw=C"><field name="NUM">0</field></shadow><block type="variables_get" id="gL$vZc1`[X}=z.O~2D9{"><field name="VAR" id="/t`Z^`;2zi5)#|*z20t/">beat_state</field></block></value><value name="B"><shadow type="math_number" id="lB:|(0F6%=Q.@pj~]u7N"><field name="NUM">1</field></shadow></value></block></value><next><block type="controls_if" id="kE@p1s?#li!LQ1s}e+P3"><value name="IF0"><shadow type="logic_boolean" id="};/Oh;1@t2pQ`tYz_t+:"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="}F11h1,hX!pVQsM`x0s-"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="YmQ~^DpGFa!TbGk{LFAa"><field name="NUM">0</field></shadow><block type="variables_get" id="|sxY_]i[:^{g42m(,Ad|"><field name="VAR" id="/t`Z^`;2zi5)#|*z20t/">beat_state</field></block></value><value name="B"><shadow type="math_number" id="QpcL]L0ys0O|$3z}|nfo"><field name="NUM">6</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="O}~OE[63fbCx1Sv!Ar#V"><field name="VAR" id="/t`Z^`;2zi5)#|*z20t/">beat_state</field><value name="VALUE"><shadow type="math_number" id="lAN[;RPZ!q(1p/eOlddF"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="jBFXk}gmNvGm#@[THXG#"><field name="VAR" id="-I9URcm![f-J?W5Yonm~">t_measure_start</field><value name="VALUE"><shadow type="math_number" id="L8TtpN%p6EN.-0MgI.Y("><field name="NUM">0</field></shadow><block type="variables_get" id="x#q|J}0;}7#`8VNH)Daz"><field name="VAR" id="b=CVt.j]xKYi$|Md84.6">t_next_beat</field></block></value></block></next></block></statement><next><block type="controls_if" id="xid?(2#*r0Fq-_n)5.#:"><value name="IF0"><shadow type="logic_boolean" id="C{QcEnnUfQxW/~QmY./%"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="sZq^xKxNIVZ^qi=chKu|"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="V[ZYC:?)rdq/9Ro7DdQE"><field name="NUM">0</field></shadow><block type="variables_get" id="Khke`KAJfJ!e1Bshp4[f"><field name="VAR" id="/t`Z^`;2zi5)#|*z20t/">beat_state</field></block></value><value name="B"><shadow type="math_number" id="7_`gmgI({~T^ppm~CE$`"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="3T18~:}3/(p).l2W0yev"><field name="VAR" id="_?z|T3K#QxNToTI:ux$-">measure_number</field><value name="VALUE"><shadow type="math_number" id="!aW(NP1L09mgg4KI^S`]"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="3:kW769U~xij%2{e^-H="><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="abJ!oIay`?4iAR:[*=1$"><field name="NUM">0</field></shadow><block type="variables_get" id="/%,m@uVJ4V2=clKn?+gZ"><field name="VAR" id="_?z|T3K#QxNToTI:ux$-">measure_number</field></block></value><value name="B"><shadow type="math_number" id="W-Ahf#nL;@;qf@E=9MR0"><field name="NUM">1</field></shadow></value></block></value></block></statement><next><block type="variables_set" id="a%3uG*/Q}%;~d18hWaOn"><field name="VAR" id="|=fbxSq/DQ[@GDK1vDAp">sched_slot</field><value name="VALUE"><shadow type="math_number" id="!D@H%yxyqP]4Zpu;XBOl"><field name="NUM">1</field></shadow></value><next><block type="device_while" id="3zse,[OrX4lA*.bEeW(;"><value name="COND"><shadow type="logic_boolean" id="A,~@Cs%q{Xoaw{;.a6~)"><field name="BOOL">FALSE</field></shadow><block type="logic_compare" id="]bPI@YO_@n=dc%kf!FOR"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="fH+zHRa1S]6G0Mx9=GZW"><field name="NUM">0</field></shadow><block type="lists_index_get" id="eDVJDzSr@LhkOHh(_]H4"><value name="LIST"><block type="lists_index_get" id="92,ng){$)t[c8-E#bN9."><value name="LIST"><block type="variables_get" id="|2:+yo=v@WsSng!Aes)6"><field name="VAR" id="sKpZ^*R$)NT)XF}kA9.Q">speed_schedule</field></block></value><value name="INDEX"><shadow type="math_number" id="TjNuyR4eDe($_hG?KFn+"><field name="NUM">0</field></shadow><block type="variables_get" id="EK:2Q~/c`y%=0^y(1NAD"><field name="VAR" id="|=fbxSq/DQ[@GDK1vDAp">sched_slot</field></block></value></block></value><value name="INDEX"><shadow type="math_number" id="r(d?%1La.6?FK=*3vPKs"><field name="NUM">0</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="K+DC1Tcsq%6w/-]~QQ:k"><field name="NUM">0</field></shadow><block type="variables_get" id="elRd:7rr^DlO}ln66xQQ"><field name="VAR" id="_?z|T3K#QxNToTI:ux$-">measure_number</field></block></value></block></value><statement name="DO"><block type="variables_set" id="hqeuQgUdxY8p[)r$-28)"><field name="VAR" id="|=fbxSq/DQ[@GDK1vDAp">sched_slot</field><value name="VALUE"><shadow type="math_number" id="8n~2`:.%reYWh.Lim-.a"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="}R!QDS53!e{[vy=fRC2J"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="i#FWk?0[uu_PP(p!aS9?" disabled="true"><field name="NUM">0</field></shadow><block type="variables_get" id="DD:`6b*@V)6dKY(M_ua,"><field name="VAR" id="|=fbxSq/DQ[@GDK1vDAp">sched_slot</field></block></value><value name="B"><shadow type="math_number" id="F-BTn[}a:+.}_maocCA+"><field name="NUM">1</field></shadow></value></block></value></block></statement><next><block type="variables_set" id="AaJY$zMNa}VFNhqemYjS"><field name="VAR" id="f8|]atRDU.hJstsL1WLv">shaker_hysteresis</field><value name="VALUE"><shadow type="math_number" id="RhkPJpNGR4tpSj{m!A;u"><field name="NUM">0</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement></block></xml>